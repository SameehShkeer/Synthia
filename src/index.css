@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: 0px;
  --radius-md: 0px;
  --radius-lg: 0px;
  --radius-xl: 0px;

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-primary-border: hsl(var(--primary-border));
  --color-accent-border: hsl(var(--accent-border));
  --color-card-border: hsl(var(--card-border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));
  --color-sidebar: hsl(var(--sidebar));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  --color-sidebar-primary-border: var(--sidebar-primary-border);
  --color-sidebar-accent-border: var(--sidebar-accent-border);
  --color-primary-border: var(--primary-border);
  --color-secondary-border: var(--secondary-border);
  --color-muted-border: var(--muted-border);
  --color-accent-border: var(--accent-border);
  --color-destructive-border: var(--destructive-border);
}

:root {
  --button-outline: rgba(255, 255, 255, 0.4);
  --badge-outline: rgba(255, 255, 255, 0.2);
  --opaque-button-border-intensity: 0;
  --elevate-1: rgba(204, 255, 0, 0.05);
  --elevate-2: rgba(204, 255, 0, 0.1);

  /* Edgy / Brutalist / Cyber-Industrial Palette */
  --background: 0 0% 2%;
  --foreground: 0 0% 95%;

  --card: 0 0% 3%;
  --card-foreground: 0 0% 95%;
  --card-border: 0 0% 15%;

  --popover: 0 0% 3%;
  --popover-foreground: 0 0% 95%;
  --popover-border: 0 0% 15%;

  /* Primary: Acid Green */
  --primary: 75 100% 50%;
  --primary-foreground: 0 0% 0%;

  /* Secondary: Dark Gray */
  --secondary: 0 0% 10%;
  --secondary-foreground: 0 0% 95%;

  /* Muted: Mid Gray */
  --muted: 0 0% 10%;
  --muted-foreground: 0 0% 50%;

  /* Accent: Cyber Purple/Pink */
  --accent: 290 100% 50%;
  --accent-foreground: 0 0% 100%;

  --destructive: 0 100% 50%;
  --destructive-foreground: 0 0% 100%;

  --border: 0 0% 15%;
  --input: 0 0% 10%;
  --ring: 75 100% 50%;

  --chart-1: 75 100% 50%;
  --chart-2: 0 0% 100%;
  --chart-3: 0 0% 50%;
  --chart-4: 290 100% 50%;
  --chart-5: 0 100% 50%;

  --sidebar: 0 0% 3%;
  --sidebar-foreground: 0 0% 95%;
  --sidebar-primary: 75 100% 50%;
  --sidebar-primary-foreground: 0 0% 0%;
  --sidebar-accent: 0 0% 10%;
  --sidebar-accent-foreground: 0 0% 95%;
  --sidebar-border: 0 0% 15%;
  --sidebar-ring: 75 100% 50%;

  --font-sans: "Space Mono", ui-monospace, monospace;
  --font-display: "Syne", sans-serif;
  --radius: 0px;

  --shadow-2xs: 2px 2px 0px 0px var(--border);
  --shadow-xs: 3px 3px 0px 0px var(--border);
  --shadow-sm: 4px 4px 0px 0px var(--border);
  --shadow: 6px 6px 0px 0px rgba(0,0,0,0.8);
  --shadow-md: 8px 8px 0px 0px rgba(0,0,0,0.8);
  --shadow-lg: 12px 12px 0px 0px rgba(0,0,0,0.8);
  --shadow-xl: 16px 16px 0px 0px rgba(0,0,0,0.8);
  --shadow-2xl: 24px 24px 0px 0px rgba(0,0,0,0.8);

  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
}

.dark {
  /* Same as root for now, this design is inherently dark */
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    /* Prevent text selection causing issues in desktop app */
    -webkit-user-select: none;
    user-select: none;
  }

  /* Allow text selection in specific areas */
  input, textarea, [contenteditable="true"], .selectable {
    -webkit-user-select: text;
    user-select: text;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: -0.02em;
  }
}

@layer utilities {
  .bg-grid-pattern {
    background-size: 40px 40px;
    background-image:
      linear-gradient(to right, hsl(var(--border) / 0.5) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--border) / 0.5) 1px, transparent 1px);
    mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
  }

  /* Brutalist Panel */
  .brutal-border {
    border: 1px solid hsl(var(--border));
    background: hsl(var(--card));
    box-shadow: 4px 4px 0 0 hsl(var(--border));
    transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .brutal-border:hover {
    border-color: hsl(var(--primary));
    box-shadow: 4px 4px 0 0 hsl(var(--primary) / 0.3);
  }

  /* Corner brackets */
  .corner-brackets {
    position: relative;
  }

  .corner-brackets::before,
  .corner-brackets::after {
    content: "";
    position: absolute;
    width: 8px;
    height: 8px;
    border-color: hsl(var(--primary));
    border-style: solid;
    pointer-events: none;
    transition: all 0.3s ease;
  }

  .corner-brackets::before {
    top: 0;
    left: 0;
    border-width: 2px 0 0 2px;
  }

  .corner-brackets::after {
    bottom: 0;
    right: 0;
    border-width: 0 2px 2px 0;
  }

  .corner-brackets:hover::before {
    width: 100%;
    height: 100%;
    border-color: hsl(var(--primary) / 0.5);
  }

  .corner-brackets:hover::after {
    width: 100%;
    height: 100%;
    border-color: hsl(var(--primary) / 0.5);
  }

  /* Scanline effect */
  .scanlines::before {
    content: " ";
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
    z-index: 50;
    background-size: 100% 3px, 4px 100%;
    pointer-events: none;
  }

  /* Glitch Text Utility */
  .glitch-text {
    position: relative;
    animation: glitch-skew 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
  }

  .glitch-text::before,
  .glitch-text::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.8;
  }

  .glitch-text::before {
    left: 2px;
    text-shadow: -1px 0 red;
    clip-path: inset(0 0 0 0);
    animation: glitch-anim 4s infinite linear alternate-reverse;
  }

  .glitch-text::after {
    left: -2px;
    text-shadow: -1px 0 blue;
    clip-path: inset(0 0 0 0);
    animation: glitch-anim2 2s infinite linear alternate-reverse;
  }

  @keyframes glitch-anim {
    0% { clip-path: inset(80% 0 0 0); transform: translate(-2px, 1px); }
    5% { clip-path: inset(10% 0 40% 0); transform: translate(2px, -1px); }
    10% { clip-path: inset(40% 0 10% 0); transform: translate(-1px, 2px); }
    15% { clip-path: inset(0 0 80% 0); transform: translate(1px, -2px); }
    20% { clip-path: inset(60% 0 0 0); transform: translate(0); }
    100% { clip-path: inset(60% 0 0 0); transform: translate(0); }
  }
  @keyframes glitch-anim2 {
    0% { clip-path: inset(10% 0 60% 0); transform: translate(2px, 0); }
    5% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 0); }
    10% { clip-path: inset(0 0 20% 0); transform: translate(1px, 0); }
    15% { clip-path: inset(50% 0 30% 0); transform: translate(-1px, 0); }
    20% { clip-path: inset(10% 0 60% 0); transform: translate(0); }
    100% { clip-path: inset(10% 0 60% 0); transform: translate(0); }
  }

  @keyframes glitch-skew {
    0% { transform: skew(0deg); }
    10% { transform: skew(-1deg); }
    20% { transform: skew(1deg); }
    30% { transform: skew(0deg); }
    100% { transform: skew(0deg); }
  }

  /* CRT Flicker */
  .crt-flicker {
    animation: flicker 0.15s infinite;
  }

  @keyframes flicker {
    0% { opacity: 0.97; }
    50% { opacity: 1; }
    100% { opacity: 0.98; }
  }

  /* Tauri-specific: Draggable titlebar regions */
  .titlebar-drag {
    -webkit-app-region: drag;
  }

  .titlebar-no-drag {
    -webkit-app-region: no-drag;
  }
}
